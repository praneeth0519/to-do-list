:root{
  --bg:#0f1724;
  --card: rgba(255,255,255,0.06);
  --accent: linear-gradient(90deg,#7b61ff,#00d4ff);
  --muted: rgba(255,255,255,0.7);
  --glass: rgba(255,255,255,0.04);
  --success: #65e08a;
  --danger: #ff6b6b;
  --width: 420px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 600px at 10% 10%, #12203b 0%, transparent 15%),
              radial-gradient(1000px 500px at 95% 90%, #2b1037 0%, transparent 20%),
              var(--bg);
  color: #fff;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
}

/* container */
.app{
  width: clamp(320px, 92vw, var(--width));
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border-radius: 14px;
  padding:16px;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6), 0 2px 6px rgba(0,0,0,0.6);
  backdrop-filter: blur(6px) saturate(120%);
  border: 1px solid rgba(255,255,255,0.03);
}

/* header */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-bottom:10px;
}
header h1{
  font-size:18px;
  letter-spacing:0.2px;
  margin:0;
  display:flex;
  align-items:center;
  gap:8px;
}
.controls button{
  background:linear-gradient(90deg,#2b2b2b,#151515);
  border:none;
  color:var(--muted);
  padding:8px;
  border-radius:8px;
  cursor:pointer;
  transition:transform .18s ease, box-shadow .18s ease;
}
.controls button:active{transform:translateY(1px)}

/* add panel */
.add-panel{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom:12px;
}
.add-panel input, .add-panel select {
  padding:10px 12px;
  border-radius:10px;
  border:none;
  outline:none;
  background:var(--glass);
  color:var(--muted);
  font-size:14px;
}
.add-panel input{flex:1}
.add-panel select{min-width:90px}
.primary{
  background:linear-gradient(90deg,#ffd166,#ff9f1c);
  border:none;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  transition: transform .12s ease, box-shadow .12s ease;
}
.primary:hover{transform:translateY(-3px); box-shadow:0 8px 30px rgba(255,160,64,0.12)}

/* filters */
.filter-panel{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
  gap:8px;
}
.filter-panel select{padding:8px;border-radius:8px;background:var(--glass);border:none;color:var(--muted)}
.filter-panel button{
  padding:8px 10px;border-radius:8px;border:none;background:transparent;color:var(--muted);cursor:pointer;
}

/* task list */
.task-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:10px;min-height:60px}
.task {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px;
  border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.02);
  transform-origin:center;
  transition: transform .22s cubic-bezier(.2,.9,.2,1), box-shadow .22s ease, background .22s ease;
  touch-action: pan-y;
  position:relative;
  overflow:hidden;
}
.task:hover{transform:translateY(-4px); box-shadow:0 10px 30px rgba(0,0,0,0.5)}
.task-left{display:flex;align-items:center;gap:12px;min-width:0}
.checkbox{
  width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;flex-shrink:0;background:rgba(255,255,255,0.02);
  transition:background .18s ease, transform .18s ease;
}
.checkbox svg{width:18px;height:18px;opacity:0.9}
.task-content{display:flex;flex-direction:column;min-width:0}
.task-title{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.task-meta{font-size:12px;color:rgba(255,255,255,0.6);margin-top:6px;display:flex;gap:8px;align-items:center}

/* priority pill */
.pill{padding:6px 8px;border-radius:999px;font-size:12px;background:rgba(0,0,0,0.22)}
.p-low{background: rgba(125,245,125,0.12); color:#baf7bf}
.p-medium{background: rgba(255,213,107,0.12); color:#ffe9a8}
.p-high{background: rgba(255,108,108,0.12); color:#ffd1d1}

/* actions */
.actions{display:flex;gap:8px;align-items:center}
.icon-btn{background:transparent;border:none;color:var(--muted);cursor:pointer;font-size:18px;padding:6px;border-radius:8px}
.icon-btn:active{transform:translateY(1px)}
.delete-anim{animation:slideOut .42s forwards}
@keyframes slideOut{to{transform:translateX(60px);opacity:0}}

/* completed state */
.completed .task-title{ text-decoration:line-through; opacity:0.7; color: #d3ffd8 }
.completed{box-shadow:0 12px 30px rgba(0,200,120,0.06); background:linear-gradient(180deg, rgba(6,60,24,0.12), rgba(6,60,24,0.08))}

/* drag placeholder */
.dragging{opacity:0.5; transform:scale(.98)}

/* responsive */
@media (max-width:420px){
  .add-panel{flex-wrap:wrap}
  .add-panel select{flex-basis:48%}
  .add-panel input{flex-basis:100%}
}

/* confetti canvas */
.confetti{position:fixed;left:0;top:0;pointer-events:none;width:100%;height:100%;z-index:9999}

/* light theme */
:root.light{
  --bg:#f4f7fb;
  --card: rgba(0,0,0,0.04);
  --muted:#1b2430;
  --glass: rgba(0,0,0,0.04);
  color:#111827;
}
:root.light .app{border-color:rgba(0,0,0,0.04)}
